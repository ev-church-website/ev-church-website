<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Focus (IN)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Open Graph -->
  <meta property="og:title" content="Focus (IN)" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://evchurchofchrist.org/Focus-IN" />

  <meta property="og:image:secure_url" content="https://evchurchofchrist.org/Focus-IN/content/logo_full.jpg" />
  <meta property="og:image" content="https://evchurchofchrist.org/Focus-IN/content/logo_full.jpg" />
  <meta property="og:image:type" content="image/jpg" />
  <meta property="og:image:alt" content="Focus (IN) Logo" />

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/png" href="content/favicon.png" />

  <!-- CSS/Styling -->
  <link rel="stylesheet" href="content/w3.css" />
  <link rel="stylesheet" href="content/w3-theme-black.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

  <!-- Scripts -->
  <!-- for smooth scrolling -->
  <script
    src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll@14.0.0/dist/smooth-scroll.polyfills.min.js"></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-69196237-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "UA-69196237-1");
  </script>

  <!-- moment.js (https://momentjs.com/) -->
  <script src="content/moment.js"></script>
</head>

<body id="myPage">
  <!-- Navbar -->
  <div class="w3-top">
    <div class="w3-bar w3-theme-d2 w3-left-align">
      <a id="menuButton" class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-hover-white w3-theme-d2"
        href="javascript:void(0);">
        <i class="fa fa-bars"></i>
      </a>
      <a href="#" class="w3-bar-item w3-button w3-teal">
        <i class="fa fa-home w3-margin-right"></i>Focus (IN)</a>
      <a href="#about" class="w3-bar-item w3-button w3-hide-small w3-hover-white">About</a>
      <a href="#events" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Events</a>
      <a href="#conference" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Conference</a>
      <a href="#location" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Location</a>
      <a href="#contact" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Contact</a>
      <a href="/index" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Eagle Valley</a>
    </div>

    <!-- Navbar on small screens -->
    <div id="navDemo" class="w3-bar-block w3-theme-d2 w3-hide w3-hide-large w3-hide-medium">
      <a href="#about" class="w3-bar-item w3-button">About</a>
      <a href="#events" class="w3-bar-item w3-button">Events</a>
      <a href="#conference" class="w3-bar-item w3-button">Conference</a>
      <a href="#location" class="w3-bar-item w3-button">Location</a>
      <a href="#contact" class="w3-bar-item w3-button">Contact</a>
      <a href="/index" class="w3-bar-item w3-button">Eagle Valley</a>
    </div>
  </div>

  <!-- Image Header -->
  <!-- Div will display relative to base img -->
  <div class="w3-display-container w3-animate-opacity">
    <!-- this is the base img (gives div its size)  -->
    <img src="content/logo.jpg" alt="Focus (IN) Logo"
      style="width:100%;min-height:350px;max-height:600px;position: relative;top: 0;left: 0;" />

    <!-- This is the overlay img, it will display in the middle of its parent -->
    <img src="content/logo_text.png" alt="Focus (IN) Logo Text"
      style="width:100%;max-height: 600px;position: absolute;margin: auto;top: 0;left: 0;bottom: 0;right: 0;" />
  </div>

  <!-- About Row -->
  <div class="w3-row w3-padding-64 w3-theme-l1 w3-padding-bottom-none" id="about">
    <!-- About Info -->
    <div class="w3-padding w3-padding-bottom-none">
      <h2>Mission</h2>
      <p>
        Our mission is to unite Christian young adults (18+) across Indiana in our
        focus on Christ. We will do this by studying the Word of God together
        and creating fellowship opportunities throughout the year.
      </p>
      <p>
        If you’ve been longing for relationships with other young Christians,
        we hope that you will join us at these Focus (IN) events. We’re
        praying that this endeavor will spark new opportunities for God’s
        people in Indiana to be unified in spirit, "[stirring] up one another
        to love and good works... encouraging one another, and all the more as
        [we] see the Day drawing near" Hebrews 10:24-25 (ESV).
      </p>
    </div>
  </div>

  <!-- Event Row -->
  <div class="w3-cell-row w3-row-padding w3-padding-64 w3-theme-l1 w3-padding-bottom-none" id="events">
    <!-- Event Info (in js script at end of file) -->
  </div>
  <div class="w3-padding-64 w3-display-container w3-theme-l1">
    <a
      href="https://calendar.google.com/calendar/b/0/r?cid=YmtwbGw0bjNoYm05NGtpbXBidHA4YW00aWdAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ">
      <button class="w3-display-middle w3-button w3-teal w3-padding-large">
        <i class="fa fa-calendar-plus-o"></i>
        Add Events to Google Calendar
      </button>
    </a>
  </div>

  <!-- Conference/Speaker Container -->
  <!-- Banner Image -->
  <img src="content/Finding Peace in God - Banner.jpg" style="width: 100%; max-height: 500px;" id="conference" />
  <div class="w3-container w3-padding-64 w3-center w3-padding-top-none w3-padding-bottom-none">
    <div class="w3-container w3-padding-64 w3-center w3-padding-top-none w3-padding-bottom-none">
      <!-- Conference Info -->
      <h2>Focus (IN) March 2021 Conference</h2>
      <p>
        Our next Focus (IN) conference will be held at Cloverdale
        Church of Christ <a href="https://goo.gl/maps/mYsoGbXsytbGvpaj6" target="_blank">(205 Brown Avenue Cloverdale,
          IN 46120)</a> on March 27, 2021. Check the <a href="https://www.facebook.com/events/1777667972372740"
          target="_blank">Facebook Event</a> or <a href="#contact">contact us</a> if you need more details on how to get
        there.
      </p>
      <p>Check-in and a light breakfast starts at 9 AM.</p>
      <p>Conference will go from 10 AM to 3 PM.</p>
      <p>Lunch will also be provided!</p>
      <p>Come and join us as we fellowship and worship together, while we learn what "Finding Peace in God" is all
        about!</p>
      <!-- Lesson Topic Section -->
      <div class="w3-padding-large w3-margin w3-container w3-card-dark w3-theme-l5">
        <p class="w3-center-align w3-padding-16 w3-padding-bottom-none" style="margin: 0px">Lesson Topics:</p>
        <div class="w3-cell-row w3-padding-16">
          <p class="w3-cell w3-mobile w3-padding">
            “Experiencing God’s Peace During Difficult Times”
            <br />(John 14:23-27,
            John 16:31-33,
            Philippians 4:6-9,
            Isaiah 26,
            Judges 6:11-24,
            Habakkuk)
          </p>
          <p class="w3-cell w3-mobile w3-padding">
            “Relationship Between Peace and Forgiveness”
            <br />(Romans 5:1-11,
            Ephesians 2,
            Colossians 3:12-17,
            Hebrews 12:12-17,
            Genesis 50:15-21,
            Matthew 18:15-35,
            Psalm 32)
          </p>
        </div>
      </div>
      <!-- Spacer -->
      <p class="w3-padding"></p>
      <p>Any updates regarding COVID-related restrictions and regulations will be communicated via the <a
          href="https://www.facebook.com/events/1777667972372740" target="_blank">Facebook Event</a>.</p>
      <p>
        If you have any questions about the conference, please
        <a href="#contact">contact us</a> using the form below. We would appreciate an
        <a href="#contact">RSVP</a> so we can plan for plenty of food.
      </p>
      <p>If you would like to stay up to date with the events we are currently planning,
        then please join our
        <a href="#contact">Mailing List</a>!
      </p>
    </div>
  </div>

  <!--Speakers-->
  <div class="w3-row w3-padding-32 w3-center">
    <h3 class="w3-left-align w3-padding">Keynote Speakers</h3>
    <div class="w3-padding-large w3-margin w3-container w3-card-dark w3-theme-l5">
      <img src="./content/BrandonLavy.png" alt="Brandon Lavy" style="width:60%;max-width: 250px" class="w3-circle">
      <h3>Brandon Lavy</h3>
      <div class="w3-left-align">
        <p>
          Brandon Lavy ministers with the Greenfield Church of Christ and hosts the Rooted Daily podcast, a regular
          study to grow deep roots into God’s Word. He and his wife spend most of their time watering their house plants
          and chasing after their dog.
        </p>
      </div>
    </div>

    <!-- Spacer -->
    <p class="w3-padding"></p>

    <div class="w3-padding-large w3-margin w3-container w3-card-dark w3-theme-l5">
      <img src="./content/BenSterchi.jpg" alt="Ben Sterchi" style="width:60%;max-width: 250px" class="w3-circle">
      <h3>Ben Sterchi</h3>
      <div class="w3-left-align">
        <p>
          Ben Sterchi is currently the Youth Minister of the Mount Carmel Church of Christ, and has been there for just
          over four years. He graduated from Freed-Hardeman University, where he got his Bachelor's Degree in Ministry
          with a focus on Youth, and a minor in Psychology. More importantly, that's where he met his amazing wife! No
          matter what he does in life- his goal will always be to make people laugh, and make them know that they are
          extremely special and important. He loves sports and is a huge fantasy nerd in his free time! He looks forward
          to getting to know everyone at the conference!
        </p>
      </div>
    </div>

  </div>

  <!-- Location/Contact Container -->
  <div class="w3-container w3-theme-l5 w3-padding">
    <div class="w3-row">
      <!-- Location/Address Info -->
      <div class="w3-col m5 w3-padding-64 w3-padding w3-padding-bottom-none" id="location">
        <div class="w3-padding-16">
          <span class="w3-xlarge w3-border-teal w3-bottombar">Location</span>
        </div>

        <table class="w3-padding">
          <tr>
            <td class="w3-padding-small">
              <i class="fa fa-map-marker w3-text-teal w3-xlarge"></i>
            </td>
            <td>
              <a href="https://goo.gl/maps/pCbgdcA5Z4p" target="_blank">8465 Crawfordsville Rd, Indianapolis, IN
                46234</a>
            </td>
          </tr>
          <tr>
            <td class="w3-padding-small">
              <i class="fa fa-envelope-o w3-text-teal w3-xlarge"></i>
            </td>
            <td>
              <a href="mailto:focusin@evchurchofchrist.org">focusin@evchurchofchrist.org</a>
            </td>
          </tr>
        </table>

        <!-- Google Map -->
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d12259.31535294724!2d-86.3116469!3d39.810831!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x64efa476da220592!2sEagle+Valley+Church+of+Christ!5e0!3m2!1sen!2sus!4v1544811908274"
          width="100%" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
      </div>

      <!-- Contact Form -->
      <div id="contact" class="w3-col m7 w3-padding-64 w3-padding">
        <div class="w3-padding-16">
          <span class="w3-xlarge w3-border-teal w3-bottombar">Contact Us</span>
        </div>

        <form netlify method="POST" name="contact-form" id="contact-form" onsubmit="return showSubmission();"
          class="w3-container w3-card-4 w3-padding-16 w3-white">
          <div class="w3-section">
            <label>Name*</label>
            <input class="w3-input" type="text" name="Name" placeholder="Name (Required)" required />
          </div>

          <div class="w3-section">
            <label>Email*</label>
            <input class="w3-input" type="email" name="Email" placeholder="Email (Required)" required />
          </div>

          <div class="w3-section">
            <label>Congregation</label>
            <input class="w3-input" type="text" name="Congregation" placeholder="Congregation (Optional)" />
          </div>

          <!-- Event RSVP -->
          <div id="EventRSVPSection" class="w3-section">
            <p>Please check the events you plan to attend:</p>
            <span id="EventRSVP"></span>
          </div>

          <!-- Email Updates Signup -->
          <div class="w3-section">
            <p>
              Would you like to recieve updates about future Focus (IN) events
              by email?
            </p>
            <input class="w3-radio" type="radio" name="EmailSignup" value="yes" checked />
            <label>Yes! I would love to get updates by email!</label>
            <br />
            <input class="w3-radio" type="radio" name="EmailSignup" value="no" />
            <label>No, I do not wish to get updates by email</label>
            <br />
          </div>

          <div class="w3-section">
            <label>Question/Comment</label>
            <textarea class="w3-input" name="Message" cols="40" rows="6"
              placeholder="Please enter your question or comment here... (Optional)"></textarea>
          </div>

          <button type="submit" class="w3-button w3-right w3-theme">
            Send
          </button>
          <button type="reset" class="w3-button w3-right w3-theme w3-margin-right">
            Reset
          </button>
          <p id="formSubmit" style="display: none">
            Please wait... (If the form does not submit, then please send us
            an email)
          </p>
        </form>

        <!--handle form submission (show wait element)-->
        <script>
          function showSubmission() {
            document.getElementById("formSubmit").style.display = "block";
          }
        </script>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="w3-container w3-padding-32 w3-theme-d1 w3-center">
    <!-- Facebook Link -->
    <h4>Join our Facebook Group</h4>
    <a class="w3-button w3-large w3-teal" href="https://www.facebook.com/groups/1331931766943577" title="Facebook"
      target="_blank">
      <i class="fa fa-facebook"></i>
    </a>

    <!-- Spacer needed for Go To top button and Facebook link to display properly -->
    <p></p>

    <!-- Go To Top button -->
    <div style="position:relative;bottom:100px;z-index:1;" class="w3-tooltip w3-right w3-hide-small">
      <span class="w3-text w3-padding w3-teal w3-hide-small">Go To Top</span>
      <a class="w3-button w3-theme" href="#myPage">
        <span class="w3-xlarge">
          <i class="fa fa-chevron-circle-up"></i>
        </span>
      </a>
    </div>
  </footer>

  <!-- Small Screen Navigation Script -->
  <script>
    // Used to toggle the menu on smaller screens when clicking on the menu button
    // It will dismiss the menu if target was not menu button
    function openNav(ev) {
      var target = ev.target;
      var menuButton = document.getElementById("menuButton");
      var navDemo = document.getElementById("navDemo");

      //if the menu is not currently being shown...
      if (navDemo.className.indexOf("w3-show") == -1) {
        //...and if the target was the menu button, or the target's parent was the menu button...
        if (target == menuButton || target.parentElement == menuButton) {
          //...then show the menu
          navDemo.className += " w3-show";
        }
      }

      //else the menu was shown, hide the menu
      else {
        navDemo.className = navDemo.className.replace(" w3-show", "");
      }
    }

    //add click event listener to DOM to toggle menu display (for smaller screens)
    document.addEventListener("click", openNav);
  </script>

  <!--initialize smooth scroll-->
  <script>
    var scroll = new SmoothScroll('a[href*="#"]');
  </script>

  <!-- add in event details with javascript -->
  <script>

    // Events helper functions to help parse return events from Google Calendar API call

    function getEndTime(event) {
      let date = event.end.date || event.end.dateTime
      let dateMoment = moment(date)

      // we need to subtract a day from all day events since Google returns the end date of an all day event as the next date
      // for example, if a single all day event started on Jan 1 and ended on Jan 2, then Google would return an end date of Jan 3
      if (allDayEvent(event)) {
        dateMoment.subtract(1, 'day')
      }

      return dateMoment
    }

    function getStartTime(event) {
      let date = event.start.date || event.start.dateTime
      return moment(date)
    }

    function getTitle(event) {
      return event.summary
    }

    function getDescription(event) {
      return event.description
    }

    function allDayEvent(event) {
      return event.end.date !== undefined
    }

    function getShortDescription(event) {
      let shortDescription = getDescription(event)

      // if the event has a description, include it
      // google calendar requires links to be a URL so if we want a link to a section on our site
      // then we need to prefix it as an actual URL then remove it before we show it on a page
      // if we have a custom link (starts with http://myLink.), then remove the prefix
      if (shortDescription) {
        return shortDescription.toString().replace('http://myLink.', '');
      }
      return ""
    }

    function getImageURL(event) {
      let eventAttachments = event.attachments
      if (eventAttachments) {
        return 'https://drive.google.com/uc?export=view&id=' + eventAttachments[0].fileId
      }
      return ''
    }

    //Takes in the img url to show, the title of the event,
    //the total amount of events to display (used to calculate event width),
    //a boolean to decide whether or not to display the event on the site (if false, just show it in RSVP section)
    //and any Event details (HTML markup supported). Then creates an event and adds it to the event section
    //of the page while also adding its rsvp info to the contact form on the page
    function createEvent(
      imgSrc,
      eventTitle,
      totalEvents,
      showEvent,
      eventDetails
    ) {
      //if total events is 1 or less, then set it to 2
      //so that the width of the eventContainer will be 50%
      if (totalEvents <= 1) {
        totalEvents = 2;
      }
      //scale total events to a percentage
      totalEvents = 100 / totalEvents;
      //if showEvent is false, then skip event creation
      if (showEvent) {
        //creating the event element
        var event = document.createElement("div");
        event.className = `w3-card w3-white w3-padding-16 w3-padding-top-none`;
        event.innerHTML = `
          <img src="${imgSrc}" alt="${eventTitle}" style="width:100%">
          <div class="w3-container">
            <h4 style="font-style: italic">${eventTitle}</h4>
            ${eventDetails}
            <div class="w3-center">
              <a href="#contact">
                <button class="w3-button w3-teal w3-padding-large">RSVP</button>
              </a>
            </div>
          </div>
      `;
        var eventContainer = document.createElement("div");
        eventContainer.className = `w3-cell w3-padding w3-mobile w3-container`;
        eventContainer.style = `width: ${totalEvents}%`;
        //adding the event element to the page
        eventContainer.appendChild(event);
        document.getElementById("events").appendChild(eventContainer);
      }

      //creating then adding the event rsvp info to the contact form
      var eventRSVP = document.createElement("span");
      eventRSVP.innerHTML = `
        <input class="w3-check" type="checkbox" name="${eventTitle}">
        <label>${eventTitle}</label>
        <br>
      `;
      document.getElementById("EventRSVP").appendChild(eventRSVP);
    }

    // getting events from public Google Calendar
    // value of 1 indicates 1 month from the current date (ex: Jan 5 - Feb 5)
    // 2 would be 2 months from the current date (ex Jan 5 - Mar 5), etc...
    // A value of zero should not be used as that would, in theory, just get events for the current day
    const MONTHS_FROM_NOW = 2

    let now = moment()
    let nowAccountedForFutureMonths = moment().add(MONTHS_FROM_NOW, 'months')

    //for more info on google calendar api visit https://developers.google.com/calendar/v3/reference/events/list 
    //NOTE: Since we are using an api key, you need to append ?key=API_KEY, to the end of the GET HTTP request
    const API_KEY = 'AIzaSyCRaaVrCuYAnOsW5wcdVDV8GUFgasLnK7o'
    const CALENDAR_ID = 'bkpll4n3hbm94kimpbtp8am4ig@group.calendar.google.com'
    let calendar_api_url = `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events?key=${API_KEY}`

    //only show events with end times after today
    calendar_api_url += `&timeMin=${now.toISOString()}`

    //only show events with start times within the next MONTHS_FROM_NOW
    // calendar_api_url += `&timeMax=${nowAccountedForFutureMonths.toISOString()}`

    // count each recurring event as its own separate instance
    calendar_api_url += `&singleEvents=true`

    // getting the results in the current time zone of client NOTE: this does not seem to work on all day events
    calendar_api_url += `&timeZone=${Intl.DateTimeFormat().resolvedOptions().timeZone}`

    fetch(calendar_api_url)
      .then(response => response.json()) // parse JSON from request
      .then(
        (result) => {
          let events = result.items;
          if (events === undefined) {
            console.error("Events was undefined");
            return;
          }
          events.sort((a, b) => { return getStartTime(a).subtract(getStartTime(b)) });
          for (let index = 0; index < events.length; index++) {
            const event = events[index];
            //creating Events (imgSrc, Event Title, totalEvents, showEvent, Event Details (HTML))
            createEvent(getImageURL(event), `${getTitle(event)} - ${getStartTime(event).format('MMMM D')}`, events.length, true, getShortDescription(event));
          }
        },
        (error) => {
          console.error(error);
        }
      )
      .then(
        () => {
          //Clean out Event RSVP Section and add a default Coming Soon notification if there are not any events
          if (document.getElementById("EventRSVP").innerHTML == "") {
            createEvent(
              "content/Coming-Soon.jpg",
              "More Events Coming Soon!",
              1,
              true,
              "<p>There are currently no events planned. But, not to worry, we are in the process of creating more soon! Fill out the contact form below to get notified as soon as we do.</p>"
            );
            document.getElementById("EventRSVPSection").innerHTML = "";
          }
        }
      )

  </script>
</body>

</html>